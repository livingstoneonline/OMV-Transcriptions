Image Prep Workflow

0) Use Zotero to set item name

1) Save original image as TIF with UID name: liv_012001_0001.tif

2) ID images that fall below the 400, 700, 1000, 1300, and 1800; or 200, 300, 400, 500 threshold:

identify -format "%f: %wx%h\n" *.tif *.jpg *.png > ~/Desktop/image-sizes.txt

3) Convert in terminal (copy and paste all code below at once):
[Note generate and move TIFFs, then generate and move JPEGs, PNGs, etc; do one at a time.]

****Regular images-tiffs************

mogrify -format jpg -resize 1800x1800 -sampling-factor 4:2:0 -strip -quality 85 -interlace JPEG -colorspace RGB -path ~/GitHub/One-More-Voice/0_dev/0-image-staging-regular/1800 *.tif  && cd ~/GitHub/One-More-Voice/0_dev/0-image-staging-regular/1800 && find . -exec rename 's|.jpg|-1800px.jpg|' {} + && cd - && 

mogrify -format jpg -resize 1300x1300 -sampling-factor 4:2:0 -strip -quality 85 -interlace JPEG -colorspace RGB -path ~/GitHub/One-More-Voice/0_dev/0-image-staging-regular/1300 *.tif  && cd ~/GitHub/One-More-Voice/0_dev/0-image-staging-regular/1300 && find . -exec rename 's|.jpg|-1300px.jpg|' {} + && cd - && 

mogrify -format jpg -resize 1000x1000 -sampling-factor 4:2:0 -strip -quality 85 -interlace JPEG -colorspace RGB -path ~/GitHub/One-More-Voice/0_dev/0-image-staging-regular/1000 *.tif  && cd ~/GitHub/One-More-Voice/0_dev/0-image-staging-regular/1000 && find . -exec rename 's|.jpg|-1000px.jpg|' {} + && cd - && 

mogrify -format jpg -resize 700x700 -sampling-factor 4:2:0 -strip -quality 85 -interlace JPEG -colorspace RGB -path ~/GitHub/One-More-Voice/0_dev/0-image-staging-regular/700 *.tif  && cd ~/GitHub/One-More-Voice/0_dev/0-image-staging-regular/700 && find . -exec rename 's|.jpg|-700px.jpg|' {} + && cd - && 

mogrify -format jpg -resize 400x400 -sampling-factor 4:2:0 -strip -quality 85 -interlace JPEG -colorspace RGB -path ~/GitHub/One-More-Voice/0_dev/0-image-staging-regular/400 *.tif  && cd ~/GitHub/One-More-Voice/0_dev/0-image-staging-regular/400 && find . -exec rename 's|.jpg|-400px.jpg|' {} + && cd ..

****Regular images-jpgs************

mogrify -format jpg -resize 1800x1800 -sampling-factor 4:2:0 -strip -quality 85 -interlace JPEG -colorspace RGB -path ~/GitHub/One-More-Voice/0_dev/0-image-staging-regular/1800 *.jpg  && cd ~/GitHub/One-More-Voice/0_dev/0-image-staging-regular/1800 && find . -exec rename 's|.jpg|-1800px.jpg|' {} + && cd - && 

mogrify -format jpg -resize 1300x1300 -sampling-factor 4:2:0 -strip -quality 85 -interlace JPEG -colorspace RGB -path ~/GitHub/One-More-Voice/0_dev/0-image-staging-regular/1300 *.jpg  && cd ~/GitHub/One-More-Voice/0_dev/0-image-staging-regular/1300 && find . -exec rename 's|.jpg|-1300px.jpg|' {} + && cd - && 

mogrify -format jpg -resize 1000x1000 -sampling-factor 4:2:0 -strip -quality 85 -interlace JPEG -colorspace RGB -path ~/GitHub/One-More-Voice/0_dev/0-image-staging-regular/1000 *.jpg  && cd ~/GitHub/One-More-Voice/0_dev/0-image-staging-regular/1000 && find . -exec rename 's|.jpg|-1000px.jpg|' {} + && cd - && 

mogrify -format jpg -resize 700x700 -sampling-factor 4:2:0 -strip -quality 85 -interlace JPEG -colorspace RGB -path ~/GitHub/One-More-Voice/0_dev/0-image-staging-regular/700 *.jpg  && cd ~/GitHub/One-More-Voice/0_dev/0-image-staging-regular/700 && find . -exec rename 's|.jpg|-700px.jpg|' {} + && cd - && 

mogrify -format jpg -resize 400x400 -sampling-factor 4:2:0 -strip -quality 85 -interlace JPEG -colorspace RGB -path ~/GitHub/One-More-Voice/0_dev/0-image-staging-regular/400 *.jpg  && cd ~/GitHub/One-More-Voice/0_dev/0-image-staging-regular/400 && find . -exec rename 's|.jpg|-400px.jpg|' {} + && cd ..

****Regular images-pngs************

mogrify -resize 1800x1800 -sampling-factor 4:2:0 -strip -quality 85 -interlace JPEG -colorspace RGB -path ~/GitHub/One-More-Voice/0_dev/0-image-staging-regular/1800 *.png  && cd ~/GitHub/One-More-Voice/0_dev/0-image-staging-regular/1800 && find . -exec rename 's|.png|-1800px.png|' {} + && cd - && 

mogrify -resize 1300x1300 -sampling-factor 4:2:0 -strip -quality 85 -interlace JPEG -colorspace RGB -path ~/GitHub/One-More-Voice/0_dev/0-image-staging-regular/1300 *.png  && cd ~/GitHub/One-More-Voice/0_dev/0-image-staging-regular/1300 && find . -exec rename 's|.png|-1300px.png|' {} + && cd - && 

mogrify -resize 1000x1000 -sampling-factor 4:2:0 -strip -quality 85 -interlace JPEG -colorspace RGB -path ~/GitHub/One-More-Voice/0_dev/0-image-staging-regular/1000 *.png  && cd ~/GitHub/One-More-Voice/0_dev/0-image-staging-regular/1000 && find . -exec rename 's|.png|-1000px.png|' {} + && cd - && 

mogrify -resize 700x700 -sampling-factor 4:2:0 -strip -quality 85 -interlace JPEG -colorspace RGB -path ~/GitHub/One-More-Voice/0_dev/0-image-staging-regular/700 *.png  && cd ~/GitHub/One-More-Voice/0_dev/0-image-staging-regular/700 && find . -exec rename 's|.png|-700px.png|' {} + && cd - && 

mogrify -resize 400x400 -sampling-factor 4:2:0 -strip -quality 85 -interlace JPEG -colorspace RGB -path ~/GitHub/One-More-Voice/0_dev/0-image-staging-regular/400 *.png  && cd ~/GitHub/One-More-Voice/0_dev/0-image-staging-regular/400 && find . -exec rename 's|.png|-400px.png|' {} + && cd ..


******Artifact Thumbnails-tiffs**********

mogrify -format jpg -resize 500x500 -sampling-factor 4:2:0 -strip -quality 85 -interlace JPEG -colorspace RGB -path ~/GitHub/One-More-Voice/0_dev/0-image-staging-artifacts/500 *.tif  && cd ~/GitHub/One-More-Voice/0_dev/0-image-staging-artifacts/500 && find . -exec rename 's|.jpg|-500px.jpg|' {} + && cd - && 

mogrify -format jpg -resize 400x400 -sampling-factor 4:2:0 -strip -quality 85 -interlace JPEG -colorspace RGB -path ~/GitHub/One-More-Voice/0_dev/0-image-staging-artifacts/400 *.tif  && cd ~/GitHub/One-More-Voice/0_dev/0-image-staging-artifacts/400 && find . -exec rename 's|.jpg|-400px.jpg|' {} + && cd -

mogrify -format jpg -resize 300x300 -sampling-factor 4:2:0 -strip -quality 85 -interlace JPEG -colorspace RGB -path ~/GitHub/One-More-Voice/0_dev/0-image-staging-artifacts/300 *.tif  && cd ~/GitHub/One-More-Voice/0_dev/0-image-staging-artifacts/300 && find . -exec rename 's|.jpg|-300px.jpg|' {} + && cd - && 

mogrify -format jpg -resize 200x200 -sampling-factor 4:2:0 -strip -quality 85 -interlace JPEG -colorspace RGB -path ~/GitHub/One-More-Voice/0_dev/0-image-staging-artifacts/200 *.tif  && cd ~/GitHub/One-More-Voice/0_dev/0-image-staging-artifacts/200 && find . -exec rename 's|.jpg|-200px.jpg|' {} + && cd ..


******Artifact Thumbnails-jpgs**********

mogrify -format jpg -resize 500x500 -sampling-factor 4:2:0 -strip -quality 85 -interlace JPEG -colorspace RGB -path ~/GitHub/One-More-Voice/0_dev/0-image-staging-artifacts/500 *.jpg  && cd ~/GitHub/One-More-Voice/0_dev/0-image-staging-artifacts/500 && find . -exec rename 's|.jpg|-500px.jpg|' {} + && cd - && 

mogrify -format jpg -resize 400x400 -sampling-factor 4:2:0 -strip -quality 85 -interlace JPEG -colorspace RGB -path ~/GitHub/One-More-Voice/0_dev/0-image-staging-artifacts/400 *.jpg && cd ~/GitHub/One-More-Voice/0_dev/0-image-staging-artifacts/400 && find . -exec rename 's|.jpg|-400px.jpg|' {} + && cd -

mogrify -format jpg -resize 300x300 -sampling-factor 4:2:0 -strip -quality 85 -interlace JPEG -colorspace RGB -path ~/GitHub/One-More-Voice/0_dev/0-image-staging-artifacts/300 *.jpg  && cd ~/GitHub/One-More-Voice/0_dev/0-image-staging-artifacts/300 && find . -exec rename 's|.jpg|-300px.jpg|' {} + && cd - && 

mogrify -format jpg -resize 200x200 -sampling-factor 4:2:0 -strip -quality 85 -interlace JPEG -colorspace RGB -path ~/GitHub/One-More-Voice/0_dev/0-image-staging-artifacts/200 *.jpg  && cd ~/GitHub/One-More-Voice/0_dev/0-image-staging-artifacts/200 && find . -exec rename 's|.jpg|-200px.jpg|' {} + && cd ..

****************

3) Move all generated files:

find . -type f -name \*.jpg -exec mv \{\} ~/GitHub/One-More-Voice/artifact-images \;
find . -type f -name \*.jpg -exec mv \{\} ~/GitHub/One-More-Voice/site-images \;
find . -type f -name \*.png -exec mv \{\} ~/GitHub/One-More-Voice/site-images \;
find . -type f -name \*.jpg -exec mv \{\} ~/GitHub/One-More-Voice/essay-images \;
find . -type f -name \*.jpg -exec mv \{\} ~/GitHub/One-More-Voice/artifact-images/thumbnails \;
find . -type f -name \*.jpg -exec mv \{\} ~/GitHub/One-More-Voice/tei-embedded-images \;

4) Remove images that do not meet threshold requirements

5) Add code to HTML [used code generator -- text below is only for reference]

[Note that the 1800 image isn't included, as it's only for images to be enlarged.]

	<!-- img sizes calculated using https://ausi.github.io/respimagelint/ -->
        <img class="image" src="site-images/liv_012001_0001-1300px.jpg" 
        srcset="
        site-images/liv_012001_0001-1300px.jpg 1300w,
        site-images/liv_012001_0001-1000px.jpg 1000w, 
        site-images/liv_012001_0001-700px.jpg 700w, 
        site-images/liv_012001_0001-400px.jpg 400w
        " 
        sizes="
        (min-width: 1000px) 638px, 
        (min-width: 780px) 699px, 
        calc(100vw - 32px)
        "

****artifact-thumbnails*****

src="artifact-images/thumbnails/liv_021012_0001_thumbnail-500px.jpg" 
srcset="
artifact-images/thumbnails/liv_021012_0001_thumbnail-500px.jpg 500w, 
artifact-images/thumbnails/liv_021012_0001_thumbnail-400px.jpg 400w, 
artifact-images/thumbnails/liv_021012_0001_thumbnail-300px.jpg 300w, 
artifact-images/thumbnails/liv_021012_0001_thumbnail-200px.jpg 200w
" 
sizes="
(min-width: 1000px) 167px, 
(min-width: 780px) 183px, 
(min-width: 480px) calc(50vw - 68px), 
calc(100vw - 53px)
"

6) Open page and calculate image sizes using https://ausi.github.io/respimagelint/ and correct as needed.convert


Reference

Page speed & Measure
https://developers.google.com/speed/pagespeed/insights/
https://web.dev/measure/
Lighthouse: https://developers.google.com/web/tools/lighthouse/
Web speed best practices: https://developer.yahoo.com/performance/rules.html

Image Magick Code & Documentation
https://www.imagemagick.org/script/identify.php
https://blog.chapagain.com.np/imagemagick-convertedit-multiple-images
https://www.howtogeek.com/109369/how-to-quickly-resize-convert-modify-images-from-the-linux-terminal/

Image Production Tips
https://stackoverflow.com/questions/7261855/recommendation-for-compressing-jpg-files-with-imagemagick#7262050

Responsive Images
https://css-tricks.com/a-guide-to-the-responsive-images-syntax-in-html/#using-srcset
https://web.dev/serve-images-with-correct-dimensions/
https://web.dev/uses-optimized-images/
https://web.dev/uses-responsive-images/
https://web.dev/serve-responsive-images/
https://developer.mozilla.org/en-US/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images

find images of a certain size: https://stackoverflow.com/questions/22751721/how-to-find-images-with-certain-size-in-terminal
"kMDItemPixelHeight>1100 && kMDItemPixelWidth>900"

Lazy Load CSS: https://blog.webjeda.com/lazy-load-css/
